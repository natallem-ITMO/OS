#!/bin/bash

#Процесс «Генератор» считывает строки с консоли, пока ему на вход не поступит строка TERM. В этом случае он посылает системный сигнал SIGTERM процессу обработчику. Процесс «Обработчик» (как и в примере, выводящий в бесконечном цикле натуральное число каждую секунду) должен перехватить системный сигнал SIGTERM и завершить работу, предварительно выведя сообщение о завершении работы по сигналу от другого процесса.

echo $$ > .pid

sigterm_func()
{
echo "shutdown by another process signal"
exit;
}

trap 'sigterm_func' SIGTERM
while true; do
sleep 1
done
